"use strict";(self.webpackChunkmg_documentation=self.webpackChunkmg_documentation||[]).push([[393],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),s=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return i.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},f=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),f=s(n),m=a,p=f["".concat(c,".").concat(m)]||f[m]||d[m]||o;return n?i.createElement(p,l(l({ref:t},u),{},{components:n})):i.createElement(p,l({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=f;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var s=2;s<o;s++)l[s]=n[s];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}f.displayName="MDXCreateElement"},2451:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return r},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return f}});var i=n(7462),a=n(3366),o=(n(7294),n(3905)),l=["components"],r={},c="CHARLIE NOTIFICATIONS",s={unversionedId:"Charlie",id:"Charlie",isDocsHomePage:!1,title:"CHARLIE NOTIFICATIONS",description:"Introduction",source:"@site/docs/Charlie.md",sourceDirName:".",slug:"/Charlie",permalink:"/mg-docs/docs/Charlie",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/Charlie.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"BACKPACK INVENTORY MODULE",permalink:"/mg-docs/docs/Backpack"},next:{title:"COURT RATING/REVIEW MODULE",permalink:"/mg-docs/docs/Court"}},u=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"How to use",id:"how-to-use",children:[],level:2},{value:"How does it Work?",id:"how-does-it-work",children:[],level:2},{value:"API",id:"api",children:[{value:"Charlie",id:"charlie",children:[],level:3},{value:"GameNotification",id:"gamenotification",children:[],level:3},{value:"CharlieConfig",id:"charlieconfig",children:[],level:3}],level:2}],d={toc:u};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"charlie-notifications"},"CHARLIE NOTIFICATIONS"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Provides a simple way of adding locally scheduled notifications to a project."),(0,o.kt)("h2",{id:"how-to-use"},"How to use"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Import package from Package Manager UI."),(0,o.kt)("li",{parentName:"ul"},"Open ",(0,o.kt)("inlineCode",{parentName:"li"},"Matchingham > Notifications")),(0,o.kt)("li",{parentName:"ul"},"Make sure enabled field is checked if you want notifications!."),(0,o.kt)("li",{parentName:"ul"},"In code, use ",(0,o.kt)("inlineCode",{parentName:"li"},"Charlie.Instance.Initialize()")," in the appropriate place.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"It handles authorization and permission request automatically."))),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("inlineCode",{parentName:"li"},"GameNotification"),"class to create a notification.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Modify properties of ",(0,o.kt)("inlineCode",{parentName:"li"},"GameNotification")," object"))),(0,o.kt)("li",{parentName:"ul"},"Schedule the notification locally with ",(0,o.kt)("inlineCode",{parentName:"li"},"Charlie.Instance.ScheduleNotification(GameNotification)"),".")),(0,o.kt)("h2",{id:"how-does-it-work"},"How does it Work?"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Charlie")," works as a proxy object to schedule notifications for the current platform.\nPlatform specific logic and types are merged in unified data structures and are translated\nto their platform specific counterparts by the ",(0,o.kt)("inlineCode",{parentName:"p"},"Charlie")," module."),(0,o.kt)("p",null,"Let's pretend we have a game manager that initializes our game at awake."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-c#"},"public class GameManager : MonoBehaviour\n{\n    public static bool IsFirstSession { get; private set; }\n\n    private void Awake()\n    {\n        CheckFirstSession();\n    \n        // Remote config module\n        Meteor.Instance.Initialize();\n        Meteor.Instance.WhenReady(_ => \n        {\n            // Now remote config is ready\n            \n            // Initialize notifications module\n            Charlie.Instance.Initialize();\n            Charlie.Instance.WhenReady(_ => \n            {\n                // On iOS, notifications module will block this call if auth\n                // request is necessary and will auto prompt the user.\n                // This method will be called after user responds to prompt\n                NotifyGameReady();\n            });\n        });\n    }\n} \n")),(0,o.kt)("p",null,"Let's assume we want to implement a notification that is fired 3 hours after first session\nand repeats in a daily interval afterwards. Following code would achieve it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-c#"},'private void OnFocusStateChanged(bool hasFocus)\n{\n    if (hasFocus)\n    {\n        if (GameManager.IsFirstSession)\n        {\n            Charlie.Instance.CancelScheduledNotification(1);\n        }\n    }\n    else\n    {\n        if (GameManager.IsFirstSession)\n        {\n            var notification = new GameNotification();\n            \n            notification.Id = 1;\n            notification.Title = "My Notification";\n            notification.Body = "Notification content goes here...";\n            notification.SetDeliveryDelay(TimeSpan.FromHours(3));\n            notification.SetRepeatInterval(TimeSpan.FromHours(24));\n            \n            Charlie.Instance.ScheduleNotification(notification);\n        }\n    }\n}\n')),(0,o.kt)("p",null,"If we want to schedule a notification after each session, we could do it as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-c#"},'private void OnFocusStateChanged(bool hasFocus)\n{\n    if (hasFocus)\n    {\n        if (GameManager.IsFirstSession)\n        {\n            Charlie.Instance.CancelScheduledNotification(2);\n        }\n    }\n    else\n    {\n        if (GameManager.IsFirstSession)\n        {\n            var notification = new GameNotification();\n            \n            notification.Id = 2;\n            notification.Title = "After Each Session";\n            notification.Body = "Notification content goes here...";\n            \n            // Using a delay\n            notification.SetDeliveryDelay(TimeSpan.FromHours(3));\n            \n            // Using specific date/time value\n            notification.SetDeliveryDate(DateTime.Now + TimeSpan.FromHours(3));\n            \n            Charlie.Instance.ScheduleNotification(notification);\n        }\n    }\n}\n')),(0,o.kt)("p",null,"If we want to configure a notification from remote, we can do it by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"Meteor"),"module."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-c#"},'// GameNotificationsConfig.cs\npublic class GameNotificationsConfig : ScriptableObject\n{\n    [RemoteSetting("myNotificationTitle")]\n    public string myNotificationTitle;\n    \n    [RemoteSetting("myNotificationBody")]\n    public string myNotificationBody;\n    \n    [RemoteSetting("myNotificationDelayInHours")]\n    public int myNotificationDelayInHours;\n}\n\n\n// GameManager.cs\npublic class GameManager : SingletonBehaviour<GameManager>\n{\n    private GameNotificationsConfig notificationsConfig;\n    \n    public GameNotificationsConfig NotificationsConfig => notificationsConfig;\n    \n    private void Awake()\n    {\n        // You need to add config before initialize call\n        Meteor.configList.Add(notificationsConfig);\n        \n        Meteor.Intance.Initialize();\n        Meteor.Instance.WhenReady(_ => \n        {\n            Charlie.Instance.Initialize();\n            Charlie.Instance.WhenReady(_ => \n            {\n                // Rest of the initialization logic\n            });\n        });\n    }\n}\n\n\n// GameNotifications.cs\nprivate void OnFocusStateChanged(bool hasFocus)\n{\n    if (hasFocus)\n    {\n        Charlie.Instance.CancelScheduledNotification(1);\n    }\n    else\n    {\n        var notification = new GameNotification();\n        \n        notification.Id = 1;\n        notification.Title = GameManager.Instance.NotificationsConfig.myNotificationTitle;\n        notification.Body = GameManager.Instance.NotificationsConfig.myNotificationBody;\n        notification.SetDeliveryDelay(GameManager.Instance.NotificationsConfig.myNotificationDelayInHours);\n        \n        Charlie.Instance.ScheduleNotification(notification);\n    }\n}\n')),(0,o.kt)("p",null,"You can find more detailed examples in samples."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"One Important thing to note is, ",(0,o.kt)("inlineCode",{parentName:"strong"},"Charlie")," module has a time range configuration in ",(0,o.kt)("inlineCode",{parentName:"strong"},"CharlieConfig"),".\nThis configuration determines which notifications should be scheduled. Range is defined by\n",(0,o.kt)("inlineCode",{parentName:"strong"},"timeRangeStart")," and ",(0,o.kt)("inlineCode",{parentName:"strong"},"timeRangeEnd")," fields, any notification with a delivery date outside\nof the time range defined by these fields will be dropped.")),(0,o.kt)("h2",{id:"api"},"API"),(0,o.kt)("h3",{id:"charlie"},"Charlie"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Initialize() : void"),": Initializes the module. On iOS, asks for user's permission as well, if\nuser was not previously asked to give permission.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"ScheduleNotification(notification: GameNotification) : void"),": Schedules a local notification")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"CancelNotification(id: int) : void"),": Cancels a notification. If notifications is shown,\nremoves it from notification center.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"CancelScheduledNotification(id: int) : void"),": Cancels a scheduled notification. If notification\nis already shown, does nothing.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"CancelScheduledNotifications() : void"),": Removes all scheduled notifications.")),(0,o.kt)("h3",{id:"gamenotification"},"GameNotification"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Id: int?"),": Id of the notification. If not set, platform will generate a random id. It is\n",(0,o.kt)("strong",{parentName:"li"},"highly")," recommended that you provide your own ids for notifications as otherwise you would\nneed to cache notification ids or save them to player prefs if you want to be able to cancel or\nupdate them at any point after they are scheduled.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Title: string"),": Title of the notification")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Subtitle: string"),": A second title for further describing the notification. (iOS only)")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Body: string"),": Content of the notification. Notification message should be set to this field.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SmallIcon: string"),": Small notification icon identifier. See ",(0,o.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/Packages/com.unity.mobile.notifications@1.4/api/Unity.Notifications.Android.AndroidNotification.html"},"Unity Mobile Notification Docs"),"\nfor details. (Android only)")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"LargeIcon: string"),": Small notification icon identifier. See ",(0,o.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/Packages/com.unity.mobile.notifications@1.4/api/Unity.Notifications.Android.AndroidNotification.html"},"Unity Mobile Notification Docs"),"\nfor details. (Android only)")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"ShowInForeground: bool"),": ",(0,o.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/Packages/com.unity.mobile.notifications@1.4/api/Unity.Notifications.iOS.iOSNotification.html"},"Unity Mobile Notification Docs"))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Repeating: bool"),": Automatically set if ",(0,o.kt)("inlineCode",{parentName:"li"},"SetRepeating")," method is used.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"DeliverWithDelay: bool"),": Automatically set if ",(0,o.kt)("inlineCode",{parentName:"li"},"SetDeliveryDelay")," method is used.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SetDeliveryDelay(delay: TimeSpan) : void"),": Sets a delay that will be used to calculate delivery date.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SetDeliveryDate(date: DateTime) : void"),": Sets the delivery date directly.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SetRepeatInterval(interval: TimeSpan) : void"),": Sets repeat interval of the notification.")),(0,o.kt)("h3",{id:"charlieconfig"},"CharlieConfig"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"enabled: bool"),": Determines whether ",(0,o.kt)("inlineCode",{parentName:"li"},"Charlie")," should initialize. Remote configurable via\n",(0,o.kt)("inlineCode",{parentName:"li"},"notificationsEnabled")," key.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"timeRangeStart: float"),": Hour of day in a 0-24 hour system. Decimal places determine the\nfraction of an hour. 7:30 AM means 7.5.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"timeRangeEnd: float"),": Notifications can only be scheduled if they are between\n",(0,o.kt)("inlineCode",{parentName:"li"},"timeRangeStart")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"timeRangeEnd")," hours. Hour of day in a 0-24 hour system.\nDecimal places determine the fraction of an hour. 7:30 AM means 7.5.")))}f.isMDXComponent=!0}}]);