"use strict";(self.webpackChunkmg_documentation=self.webpackChunkmg_documentation||[]).push([[858],{3905:function(e,t,i){i.d(t,{Zo:function(){return u},kt:function(){return p}});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(i),p=a,f=d["".concat(s,".").concat(p)]||d[p]||m[p]||r;return i?n.createElement(f,o(o({ref:t},u),{},{components:i})):n.createElement(f,o({ref:t},u))}));function p(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<r;c++)o[c]=i[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}d.displayName="MDXCreateElement"},981:function(e,t,i){i.r(t),i.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var n=i(7462),a=i(3366),r=(i(7294),i(3905)),o=["components"],l={},s="METEOR REMOTE CONFIG MODULE",c={unversionedId:"Meteor",id:"Meteor",isDocsHomePage:!1,title:"METEOR REMOTE CONFIG MODULE",description:"Introduction",source:"@site/docs/Meteor.md",sourceDirName:".",slug:"/Meteor",permalink:"/mg-docs/docs/Meteor",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/Meteor.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"LOGGER MODULE",permalink:"/mg-docs/docs/Logger"},next:{title:"PRIVACY POLICY POPUP",permalink:"/mg-docs/docs/Privacy Policy Popup"}},u=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"How to Use",id:"how-to-use",children:[],level:2},{value:"How does this work?",id:"how-does-this-work",children:[],level:2},{value:"API &amp; Details",id:"api--details",children:[],level:2}],m={toc:u};function d(e){var t=e.components,l=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"meteor-remote-config-module"},"METEOR REMOTE CONFIG MODULE"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Provides a unified methodology for receiving remote configuration from different sources, or even multiple\nsources at the same time."),(0,r.kt)("h2",{id:"how-to-use"},"How to Use"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install package from Package Manager UI")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install one or more Meteor Service Packages from Package Manager UI. These services are what actually handle\nfetching and loading remote settings.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Open settings from ",(0,r.kt)("inlineCode",{parentName:"p"},"Matchingham > Remote Settings > Configure"),". You can also configure services individually\nfrom the same ",(0,r.kt)("inlineCode",{parentName:"p"},"Matchingham > Remote Settings")," menu.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Make sure to call ",(0,r.kt)("inlineCode",{parentName:"p"},"Meteor.Instance.Initialize()")," method in the appropriate place.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Group settings you want to be remote configurable into ",(0,r.kt)("inlineCode",{parentName:"p"},"Scriptable Object"),"s. Meteor requires config\nobjects to be ",(0,r.kt)("inlineCode",{parentName:"p"},"Scriptable Object"),"s or they cannot be tracked!")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Mark fields with ",(0,r.kt)("inlineCode",{parentName:"p"},"Remote Setting")," attribute to make them remote compatible. By default, the field name is used\nas the remote key, however, you can provide a custom one as a constructor parameter."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'[RemoteSetting("myModuleEnabled")]\npublic bool enabled;\n')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If you want multiple different fields to be managed by the same remote config field, you need to mark\none of them the default value. So in case remote fetch fails, the system will have a default value. This\nis achieved by adding ",(0,r.kt)("inlineCode",{parentName:"p"},"Use As Default Value")," attribute to one of these fields."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'public class MyConfig : ScriptableObject\n{\n    [UseAsDefaultValue]\n    [RemoteSetting("myConfigEnabled")]\n    public bool enabled;\n}\n\npublic class TheirConfig : ScriptableObject\n{\n    [RemoteSetting("myConfigEnabled")]\n    public bool isMyConfigEnabled;\n}\n'))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Just read values from the scriptable objects like you normally do, the values will be the remote values."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"// Reading value without remote settings\nmySettingObject.myValue;\n\n// Reading value with remote settings (With Meteor initialized and myValue marked as remote setting)\nmySettingObject.myValue;\n")))),(0,r.kt)("h2",{id:"how-does-this-work"},"How does this work?"),(0,r.kt)("p",null,"Meteor collects fields marked with ",(0,r.kt)("inlineCode",{parentName:"p"},"Remote Setting")," attribute in scriptable objects registered to Meteor.\nIt then maps them to a default remote provider if there are any imported. These mapping data can be changed\nfrom the module settings from ",(0,r.kt)("inlineCode",{parentName:"p"},"Matchingham > Remote Settings > Configure")," menu."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Meteor Config",src:i(3872).Z})),(0,r.kt)("p",null,"When initialized, meteor first crates a dictionary holding the default values for each remote setting.\nThen it attempts to initialize all imported remote provider services with the collected default values\npassed in as fall back. When a service is initialized, it notifies Meteor that its values are ready, so\nmeteor syncs remote settings that are mapped to the initialized service. When all services are initialized,\nmeteor initialization is complete."),(0,r.kt)("p",null,"Because meteor is a proxy module, you can easily integrate new remote providers by implementing the\n",(0,r.kt)("inlineCode",{parentName:"p"},"IRemoteSettingsService")," interface. This interface defines the API which Meteor proxy uses to initialize the\nservice, get notified when it is done and get remote values."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"public interface IRemoteSettingsService\n{\n    void Initialize(Dictionary<string, object> defaultRemoteSettings, Action<RemoteInitializationResult> initialized);\n    object GetValue(Type type, string key);\n}\n")),(0,r.kt)("p",null,"Create a service provider for the remote settings provider you want to integrate and make sure it implements\nthe above interface. Then register an instance of the service you coded with ",(0,r.kt)("inlineCode",{parentName:"p"},"Meteor.services.Add(serviceInstance)"),"\ncall. Make sure this registration is done before Meteor is initialized!"),(0,r.kt)("p",null,"The only thing you need to do at this point is, mapping some remote settings to the new provider service you coded.\nJust like with other services, you can do this from Meteor settings from ",(0,r.kt)("inlineCode",{parentName:"p"},"Matchingham > Remote Settings > Configure"),"\nmenu."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Meteor Config",src:i(7006).Z})),(0,r.kt)("h2",{id:"api--details"},"API & Details"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Initialize()"),": Starts module initialization. You need to call this at the\nappropriate place.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Dispose()"),": Call this method when game is closing. In editor, this also resets remote fields back to their\noriginal values, so the default values are not corrupted.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"WhenInitialized(Action)"),": Allows you to register a callback that will be fired only\nafter the module is successfully initialized. Use this to execute logic that requires\nthis module to be initialized first. If the module has already initialized, immediately\ninvokes the callback.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"WhenFailedToInitialize(Action)"),": Allows you to register a callback that will be fired only after\nthe module fails to initialize for any reason. Use this to handle what should happen\nin case this module fails to initialize. If the module has already failed to initialize, immediately\ninvokes the callback.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"WhenReady(Action)"),": Combined version of ",(0,r.kt)("inlineCode",{parentName:"li"},"WhenInitialized")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"WhenFailedToInitialize"),".\nDelays execution of callback till module is first initialized or failed to initialize, immediately invoke\nthe callback if it is already initialized or failed to initialize.")))}d.isMDXComponent=!0},3872:function(e,t,i){t.Z=i.p+"assets/images/meteor-config-menu-bd8b97dc103a917e568bd85a86fa853c.png"},7006:function(e,t,i){t.Z=i.p+"assets/images/meteor-settings-ee1bc8d738560f2dfd6eb09a411ac09d.png"}}]);